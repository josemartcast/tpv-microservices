<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.tpv.desktop.ui.sales.SalesController"
            prefWidth="1000" prefHeight="650">

  <!-- LEFT: categorías -->
  <left>
    <VBox spacing="10" style="-fx-padding: 12;">
      <Label text="Categorías" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
      <ListView fx:id="categoriesList" prefWidth="220"/>
    </VBox>
  </left>

  <!-- CENTER: productos -->
  <center>
    <VBox spacing="10" style="-fx-padding: 12;">
      <HBox spacing="10" alignment="CENTER_LEFT">
        <Label text="Productos" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="Nuevo ticket" onAction="#onNewTicket"/>
      </HBox>

      <ScrollPane fitToWidth="true" fitToHeight="true">
        <content>
          <FlowPane fx:id="productsPane" hgap="10" vgap="10" prefWrapLength="600"/>
        </content>
      </ScrollPane>

      <Label fx:id="errorLabel" text="" style="-fx-text-fill: red;"/>
    </VBox>
  </center>

  <!-- RIGHT: ticket actual -->
  <right>
    <VBox spacing="10" style="-fx-padding: 12;" prefWidth="380">
      <Label text="Ticket actual" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>

      <Label fx:id="ticketInfoLabel" text="Sin ticket"/>

      <TableView fx:id="linesTable" prefHeight="420">
        <columns>
          <TableColumn fx:id="colName" text="Producto" prefWidth="170"/>
          <TableColumn fx:id="colQty" text="Qty" prefWidth="60"/>
          <TableColumn fx:id="colUnit" text="€/u" prefWidth="70"/>
          <TableColumn fx:id="colTotal" text="Total" prefWidth="70"/>
        </columns>
      </TableView>

      <HBox spacing="10" alignment="CENTER_RIGHT">
        <Label text="TOTAL:" style="-fx-font-weight: bold;"/>
        <Label fx:id="totalLabel" text="0.00" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
      </HBox>

      <Separator/>

      <HBox spacing="10">
        <Button fx:id="payCashBtn" text="Cobrar Efectivo" onAction="#onPayCash" maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
        <Button fx:id="payCardBtn" text="Tarjeta" onAction="#onPayCard" maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
      </HBox>
      <Button fx:id="payBizumBtn" text="Bizum" onAction="#onPayBizum" maxWidth="Infinity"/>

      <HBox spacing="10">
        <Button fx:id="cancelBtn" text="Cancelar" onAction="#onCancel" maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
        <Button fx:id="refreshBtn" text="Refrescar" onAction="#onRefresh" maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
      </HBox>
    </VBox>
  </right>

</BorderPane>

